<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content" />
    
    <!-- Blocking Theme Script - Prevents FOUC for both theme and accent color -->
    <script>
      (function() {
        try {
          // Accent color configurations - must match useAccentColor.tsx
          var accentConfigs = {
            red: { primary: "0 85% 60%", primaryGlow: "0 85% 70%", aiMessageBg: "0 15% 16%", aiMessageBorder: "0 20% 24%", userMessageBg: "0 85% 60%", userMessageBorder: "0 85% 60%", lightPrimary: "0 90% 55%", lightPrimaryGlow: "0 90% 65%", lightAiMessageBg: "0 20% 97%", lightAiMessageBorder: "0 15% 92%" },
            blue: { primary: "200 95% 55%", primaryGlow: "200 90% 65%", aiMessageBg: "200 15% 16%", aiMessageBorder: "200 20% 24%", userMessageBg: "200 95% 55%", userMessageBorder: "200 95% 55%", lightPrimary: "200 95% 50%", lightPrimaryGlow: "200 90% 60%", lightAiMessageBg: "200 20% 97%", lightAiMessageBorder: "200 15% 92%" },
            green: { primary: "142 76% 42%", primaryGlow: "142 76% 52%", aiMessageBg: "142 15% 16%", aiMessageBorder: "142 20% 24%", userMessageBg: "142 76% 42%", userMessageBorder: "142 76% 42%", lightPrimary: "142 76% 45%", lightPrimaryGlow: "142 76% 55%", lightAiMessageBg: "142 20% 97%", lightAiMessageBorder: "142 15% 92%" },
            yellow: { primary: "48 95% 60%", primaryGlow: "48 95% 70%", aiMessageBg: "48 15% 16%", aiMessageBorder: "48 20% 24%", userMessageBg: "48 95% 60%", userMessageBorder: "48 95% 60%", lightPrimary: "48 95% 55%", lightPrimaryGlow: "48 95% 65%", lightAiMessageBg: "48 20% 97%", lightAiMessageBorder: "48 15% 92%" },
            purple: { primary: "270 75% 60%", primaryGlow: "270 75% 70%", aiMessageBg: "270 15% 16%", aiMessageBorder: "270 20% 24%", userMessageBg: "270 75% 60%", userMessageBorder: "270 75% 60%", lightPrimary: "270 75% 55%", lightPrimaryGlow: "270 75% 65%", lightAiMessageBg: "270 20% 97%", lightAiMessageBorder: "270 15% 92%" },
            orange: { primary: "25 95% 58%", primaryGlow: "25 95% 68%", aiMessageBg: "25 15% 16%", aiMessageBorder: "25 20% 24%", userMessageBg: "25 95% 58%", userMessageBorder: "25 95% 58%", lightPrimary: "25 95% 55%", lightPrimaryGlow: "25 95% 65%", lightAiMessageBg: "25 20% 97%", lightAiMessageBorder: "25 15% 92%" },
            noir: { primary: "0 0% 92%", primaryGlow: "0 0% 75%", aiMessageBg: "0 0% 12%", aiMessageBorder: "0 0% 20%", userMessageBg: "0 0% 35%", userMessageBorder: "0 0% 45%", lightPrimary: "0 0% 15%", lightPrimaryGlow: "0 0% 25%", lightAiMessageBg: "0 0% 97%", lightAiMessageBorder: "0 0% 90%" }
          };

          // Determine theme
          var savedTheme = localStorage.getItem('theme');
          var followSystem = localStorage.getItem('followSystemTheme');
          var shouldFollowSystem = followSystem === null || followSystem === 'true';
          
          var theme = 'dark';
          if (shouldFollowSystem) {
            theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          } else if (savedTheme === 'light' || savedTheme === 'dark') {
            theme = savedTheme;
          }
          
          // Apply theme class immediately
          document.documentElement.classList.add(theme);

          // Apply accent color CSS variables immediately
          var accentColor = localStorage.getItem('accentColor') || 'blue';
          var config = accentConfigs[accentColor] || accentConfigs.blue;
          var isLight = theme === 'light';
          var root = document.documentElement;
          
          // Set data attribute for CSS targeting
          root.setAttribute('data-accent', accentColor);
          
          // Apply CSS variables based on theme
          root.style.setProperty('--primary', isLight ? config.lightPrimary : config.primary);
          root.style.setProperty('--primary-glow', isLight ? config.lightPrimaryGlow : config.primaryGlow);
          root.style.setProperty('--ring', isLight ? config.lightPrimary : config.primary);
          root.style.setProperty('--ai-message-bg', isLight ? config.lightAiMessageBg : config.aiMessageBg);
          root.style.setProperty('--ai-message-border', isLight ? config.lightAiMessageBorder : config.aiMessageBorder);
          root.style.setProperty('--user-message-bg', config.userMessageBg);
          root.style.setProperty('--user-message-border', config.userMessageBorder);
          
          // Noir theme: black text on white buttons
          if (accentColor === 'noir') {
            root.style.setProperty('--primary-foreground', '0 0% 5%');
          } else {
            root.style.setProperty('--primary-foreground', '240 10% 98%');
          }
          
          // Mark theme as ready
          document.documentElement.classList.add('theme-ready');
        } catch (e) {
          console.warn('Failed to apply theme before render:', e);
          document.documentElement.classList.add('dark', 'theme-ready');
        }
      })();
    </script>
    
    <title>ArcAi by Win The Night • Ask. Reflect. Create.</title>
    <meta name="description" content="ArcAI by Win The Night - Advanced AI conversations powered by Gemini. Ask, Reflect, Create.">
    <meta name="author" content="ArcAI by Win The Night" />
    <meta name="keywords" content="AI chatbot, voice AI, OpenAI, realtime voice, conversational AI, ask reflect create">
    <link rel="canonical" href="/" />

    <!-- PWA Configuration -->
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/arc-logo-pwa.png" type="image/png">
    <meta name="theme-color" content="#00cdff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ArcAI">
    <link rel="apple-touch-icon" href="/arc-logo-pwa.png">

    
    
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/arc-logo-pwa.png">

    <meta name="twitter:card" content="summary_large_image" />
    
    
    <meta name="twitter:image" content="/arc-logo-pwa.png">
    <meta property="og:title" content="ArcAi by Win The Night • Ask. Reflect. Create.">
  <meta name="twitter:title" content="ArcAi by Win The Night • Ask. Reflect. Create.">
  <meta property="og:description" content="ArcAI by Win The Night - Advanced AI conversations powered by Gemini. Ask, Reflect, Create.">
  <meta name="twitter:description" content="ArcAI by Win The Night - Advanced AI conversations powered by Gemini. Ask, Reflect, Create.">
</head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Force Unregister All Service Workers -->
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          for (let registration of registrations) {
            registration.unregister().then(function(success) {
              console.log('Service worker unregistered:', success);
            });
          }
        });

        // Clear all caches
        if ('caches' in window) {
          caches.keys().then(function(names) {
            for (let name of names) {
              caches.delete(name);
              console.log('Deleted cache:', name);
            }
          });
        }
      }
    </script>
  </body>
</html>
